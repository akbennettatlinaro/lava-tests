metadata:
    name: lava-populate-server
    format: "Lava-Test-Shell Test Definition 1.0"
    description: "begin populating a lava server"
params:
    INSTANCE: production
    DEVICE_TYPE: kvm
    ADMINUSER: admin
    ADMINPASS: admin
    NUMKVMS: 2
install:
    deps:
        - git-core
        - grep
        - curl
run:
    steps:
        - echo POPULATELAVA Add $NUMKVMS $DEVICE_TYPE to instance $INSTANCE
        - export SKIP_ROOT_CHECK=yes
        - ./lava/add-kvm-devices.sh $INSTANCE $DEVICE_TYPE $NUMKVMS
        - echo POPULATELAVA Add user $ADMINUSER:$ADMINPASS to instance $INSTANCE
        - ./lava/create-superuser.sh $INSTANCE $ADMINUSER $ADMINPASS
        
        
